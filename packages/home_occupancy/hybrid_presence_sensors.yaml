template:
  - triggers:
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_chambre_pir
      to:
        - "on"
      id: pir_detected
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_chambre_mmwave
      to:
        - "off"
      id: mmwave_clear
    binary_sensor:
      - name: hybrid_occupancy_sensor_bedroom
        unique_id: hybrid_occupancy_sensor_bedroom
        state: |
          {% if trigger.id == "pir_detected" %}
            {{true}}
          {% else %}
            {{false}}
          {% endif %}


  - triggers:
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_chambre_marilou_pir
      to:
        - "on"
      id: pir_detected
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_chambre_marilou_mmwave
      to:
        - "off"
      id: mmwave_clear
    binary_sensor:
      - name: hybrid_occupancy_sensor_marilou_bedroom
        unique_id: hybrid_occupancy_sensor_marilou_bedroom
        state: |
          {% if trigger.id == "pir_detected" %}
            {{true}}
          {% else %}
            {{false}}
          {% endif %}


  - triggers:
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_bureau_pir
      to:
        - "on"
      id: pir_detected
    - trigger: state
      entity_id:
        - binary_sensor.capteur_presence_bureau_mmwave
      to:
        - "off"
      id: mmwave_clear
    binary_sensor:
      - name: hybrid_occupancy_sensor_office
        unique_id: hybrid_occupancy_sensor_office
        state: |
          {% if trigger.id == "pir_detected" %}
            {{true}}
          {% else %}
            {{false}}
          {% endif %}
