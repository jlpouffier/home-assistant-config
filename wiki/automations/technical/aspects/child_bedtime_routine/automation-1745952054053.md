# Mode sommeil Child - Bouton / Mode sommeil Enfant - Bouton

## English
- Back to guest-friendly view: [child_bedtime_routine](../../../aspects/child_bedtime_routine.md)
- Back to technical aspect index: [child_bedtime_routine](../child_bedtime_routine.md)

### Summary
- Runs when: Bouton 1 (Chambre de Child); Bouton 2 (Chambre de Child); Bouton 3 (Chambre de Child); Bouton 4 (Chambre de Child)
- Only if: A custom rule is true
- Then: Execute the flow below

### Scripts called
- [Démarrer la routine du sommeil de Child](../../scripts/start_child_bedtime_routine.md)

### Flow (trace-style)
- Triggers:
  - Bouton 1 (Chambre de Child)
  - Bouton 2 (Chambre de Child)
  - Bouton 3 (Chambre de Child)
  - Bouton 4 (Chambre de Child)
- Conditions (all must be true):
  - A custom rule is true
- Actions:
  - CHOOSE (first match)
    - Branch 1
      - Check: Trigger “on” fired
      - THEN
        - Turn off Mode Sommeil (Chambre de Child)
    - Branch 2
      - Check: Trigger “off” fired
      - THEN
        - IF
          - Check: Mode Sommeil (Chambre de Child) is “off”
          - THEN
            - Turn on Mode Sommeil (Chambre de Child)
          - ELSE
            - Run script: Démarrer la routine du sommeil de Child

## Français
- Retour vers la vue “invité” : [child_bedtime_routine](../../../aspects/child_bedtime_routine.md)
- Retour vers l’index technique de l’aspect : [child_bedtime_routine](../child_bedtime_routine.md)

### Résumé
- Se déclenche quand : Bouton 1 (Chambre de Enfant); Bouton 2 (Chambre de Enfant); Bouton 3 (Chambre de Enfant); Bouton 4 (Chambre de Enfant)
- Uniquement si : Une règle personnalisée est vraie
- Ensuite : Exécuter le déroulé ci-dessous

### Scripts appelés
- [Démarrer la routine du sommeil de Enfant](../../scripts/start_child_bedtime_routine.md)

### Déroulé (style ‘trace’)
- Déclencheurs :
  - Bouton 1 (Chambre de Enfant)
  - Bouton 2 (Chambre de Enfant)
  - Bouton 3 (Chambre de Enfant)
  - Bouton 4 (Chambre de Enfant)
- Conditions (toutes doivent être vraies) :
  - Une règle personnalisée est vraie
- Actions :
  - CHOISIR (première branche valide)
    - Branche 1
      - Vérifier : Le déclencheur “on” s’est produit
      - ALORS
        - Désactiver Mode Sommeil (Chambre de Enfant)
    - Branche 2
      - Vérifier : Le déclencheur “off” s’est produit
      - ALORS
        - SI
          - Vérifier : Mode Sommeil (Chambre de Enfant) est “off”
          - ALORS
            - Activer Mode Sommeil (Chambre de Enfant)
          - SINON
            - Lancer le script : Démarrer la routine du sommeil de Enfant
