# Simulation de présence / Simulation de présence

## English
- Back to guest-friendly view: [presence_simulation](../../../aspects/presence_simulation.md)
- Back to technical aspect index: [presence_simulation](../presence_simulation.md)

### Summary
- Runs when: A trigger fires; Simulation de présence; Simulation de présence - Contrôle des ouvertures; Modes de presence de la maison; Home Assistant starts
- Only if: Simulation de présence is “on”; Modes de presence de la maison is “Vide”; Mode invité is “off”
- Then: Get events Simulateur de Présence; If Porte d'entrée (Entrée) is “unlocked”; Wait for trigger: Porte d'entrée (Entrée) from “locked” (timeout 30m); Branch 1: if A computed rule is true; Turn off a target; If Simulation de présence - Contrôle des ouvertures is “on”; Close Volets (Salon); Close Rideaux Premier Étage; Branch 2: if A computed rule is true; Turn off a target; Turn on a target; If Simulation de présence - Contrôle des ouvertures is “on”; Branch 3: if A computed rule is true; …

```mermaid
flowchart TD
  T1["A trigger fires"]
  T2["Simulation de présence"]
  T3["Simulation de présence - Contrôle des ouvertures"]
  T4["Modes de presence de la maison"]
  T5["Home Assistant starts"]
  A6["Get events Simulateur de Présence"]
  A7["If Porte d'entrée (Entrée) is “unlocked”"]
  A8["Wait for trigger: Porte d'entrée (Entrée) from “locked” (timeout 30m)"]
  A9["Branch 1: if A computed rule is true"]
  A10["Turn off a target"]
  A11["If Simulation de présence - Contrôle des ouvertures is “on”"]
  A12["Close Volets (Salon)"]
  A13["Close Rideaux Premier Étage"]
  A14["Branch 2: if A computed rule is true"]
  A15["Turn off a target"]
  A16["Turn on a target"]
  A17["If Simulation de présence - Contrôle des ouvertures is “on”"]
  A18["…"]
  X["Do nothing"]
  A6 --> A7
  A7 --> A8
  A8 --> A9
  A9 --> A10
  A10 --> A11
  A11 --> A12
  A12 --> A13
  A13 --> A14
  A14 --> A15
  A15 --> A16
  A16 --> A17
  A17 --> A18
  C19{"Mode invité is “off”"}
  C19 -->|Yes| A6
  C19 -->|No| X
  C20{"Modes de presence de la maison is “Vide”"}
  C20 -->|Yes| C19
  C20 -->|No| X
  C21{"Simulation de présence is “on”"}
  C21 -->|Yes| C20
  C21 -->|No| X
  T1 --> C21
  T2 --> C21
  T3 --> C21
  T4 --> C21
  T5 --> C21
```

## Français
- Retour vers la vue “invité” : [presence_simulation](../../../aspects/presence_simulation.md)
- Retour vers l’index technique de l’aspect : [presence_simulation](../presence_simulation.md)

### Résumé
- Se déclenche quand : Un déclencheur se produit; Simulation de présence; Simulation de présence - Contrôle des ouvertures; Modes de presence de la maison; Home Assistant démarre
- Uniquement si : Simulation de présence est “on”; Modes de presence de la maison est “Vide”; Mode invité est “off”
- Ensuite : Action : get events sur Simulateur de Présence; Si Porte d'entrée (Entrée) est “unlocked”; Attendre le déclencheur : Porte d'entrée (Entrée) de “locked” (max 30m); Branche 1 : si Une règle calculée est vraie; Éteindre une cible; Si Simulation de présence - Contrôle des ouvertures est “on”; Fermer Volets (Salon); Fermer Rideaux Premier Étage; Branche 2 : si Une règle calculée est vraie; Éteindre une cible; Allumer une cible; Si Simulation de présence - Contrôle des ouvertures est “on”; Branche 3 : si Une règle calculée est vraie; …

```mermaid
flowchart TD
  T1["Un déclencheur se produit"]
  T2["Simulation de présence"]
  T3["Simulation de présence - Contrôle des ouvertures"]
  T4["Modes de presence de la maison"]
  T5["Home Assistant démarre"]
  A6["Action : get events sur Simulateur de Présence"]
  A7["Si Porte d'entrée (Entrée) est “unlocked”"]
  A8["Attendre le déclencheur : Porte d'entrée (Entrée) de “locked” (max 30m)"]
  A9["Branche 1 : si Une règle calculée est vraie"]
  A10["Éteindre une cible"]
  A11["Si Simulation de présence - Contrôle des ouvertures est “on”"]
  A12["Fermer Volets (Salon)"]
  A13["Fermer Rideaux Premier Étage"]
  A14["Branche 2 : si Une règle calculée est vraie"]
  A15["Éteindre une cible"]
  A16["Allumer une cible"]
  A17["Si Simulation de présence - Contrôle des ouvertures est “on”"]
  A18["…"]
  X["Ne rien faire"]
  A6 --> A7
  A7 --> A8
  A8 --> A9
  A9 --> A10
  A10 --> A11
  A11 --> A12
  A12 --> A13
  A13 --> A14
  A14 --> A15
  A15 --> A16
  A16 --> A17
  A17 --> A18
  C19{"Mode invité est “off”"}
  C19 -->|Oui| A6
  C19 -->|Non| X
  C20{"Modes de presence de la maison est “Vide”"}
  C20 -->|Oui| C19
  C20 -->|Non| X
  C21{"Simulation de présence est “on”"}
  C21 -->|Oui| C20
  C21 -->|Non| X
  T1 --> C21
  T2 --> C21
  T3 --> C21
  T4 --> C21
  T5 --> C21
```
