# Mode Sommeil - Actions / Mode Sommeil - Actions

## English
- Back to guest-friendly view: [sleep_mode](../../../aspects/sleep_mode.md)
- Back to technical aspect index: [sleep_mode](../sleep_mode.md)

### Summary
- Runs when: Mode Sommeil (Chambre)
- Only if: Modes de presence de la maison is “Occupée”
- Then: Execute the flow below

### Scripts called
- [Éteindre tous les lecteurs multimédia](../../scripts/eteindre_tous_les_lecteur_multimedia.md)
- [Power Notification - Porte d'entrée ouverte lors du coucher](../../scripts/power_notification_porte_d_entree_ouverte_lors_du_coucher.md)

### Flow (trace-style)
- Triggers:
  - Mode Sommeil (Chambre)
- Conditions (all must be true):
  - Modes de presence de la maison is “Occupée”
- Actions:
  - CHOOSE (first match)
    - Branch 1
      - Check: Mode Sommeil (Chambre) is “off”
      - THEN
        - IF
          - Check: Mode invité is “off”
          - THEN
            - Turn on lights in Couloir
            - Open Volets (Salon)
            - IF
              - Check: Station météo Lumière détectée (Jardin) is “off”
              - THEN
                - Turn on lights in Cuisine, Salon
        - Pause Enceintes (Chambre)
        - IF
          - Check: Fenêtre (Chambre) is “off”
          - THEN
            - Open Rideau (Chambre)
            - IF
              - Check: Station météo Lumière détectée (Jardin) is “on”
              - THEN
                - Turn off lights in Chambre
    - Branch 2
      - Check: Mode Sommeil (Chambre) is “on”
      - THEN
        - IF
          - Check: Mode invité is “off”
          - THEN
            - Close Volets (Salon)
            - Run script: Éteindre tous les lecteurs multimédia
            - Turn off lights in Jardin
            - IF
              - Check: Porte d'entrée (Entrée) is “off”
              - THEN
                - Lock Porte d'entrée (Entrée)
              - ELSE
                - Run script: Power Notification - Porte d'entrée ouverte lors du coucher
        - Turn off lights in Chambre
        - Pause Enceintes (Chambre)
        - IF
          - Check: Fenêtre (Chambre) is “off”
          - THEN
            - Close Rideau (Chambre)

## Français
- Retour vers la vue “invité” : [sleep_mode](../../../aspects/sleep_mode.md)
- Retour vers l’index technique de l’aspect : [sleep_mode](../sleep_mode.md)

### Résumé
- Se déclenche quand : Mode Sommeil (Chambre)
- Uniquement si : Modes de presence de la maison est “Occupée”
- Ensuite : Exécuter le déroulé ci-dessous

### Scripts appelés
- [Éteindre tous les lecteurs multimédia](../../scripts/eteindre_tous_les_lecteur_multimedia.md)
- [Power Notification - Porte d'entrée ouverte lors du coucher](../../scripts/power_notification_porte_d_entree_ouverte_lors_du_coucher.md)

### Déroulé (style ‘trace’)
- Déclencheurs :
  - Mode Sommeil (Chambre)
- Conditions (toutes doivent être vraies) :
  - Modes de presence de la maison est “Occupée”
- Actions :
  - CHOISIR (première branche valide)
    - Branche 1
      - Vérifier : Mode Sommeil (Chambre) est “off”
      - ALORS
        - SI
          - Vérifier : Mode invité est “off”
          - ALORS
            - Allumer les lumières dans Couloir
            - Ouvrir Volets (Salon)
            - SI
              - Vérifier : Station météo Lumière détectée (Jardin) est “off”
              - ALORS
                - Allumer les lumières dans Cuisine, Salon
        - Pause Enceintes (Chambre)
        - SI
          - Vérifier : Fenêtre (Chambre) est “off”
          - ALORS
            - Ouvrir Rideau (Chambre)
            - SI
              - Vérifier : Station météo Lumière détectée (Jardin) est “on”
              - ALORS
                - Éteindre les lumières dans Chambre
    - Branche 2
      - Vérifier : Mode Sommeil (Chambre) est “on”
      - ALORS
        - SI
          - Vérifier : Mode invité est “off”
          - ALORS
            - Fermer Volets (Salon)
            - Lancer le script : Éteindre tous les lecteurs multimédia
            - Éteindre les lumières dans Jardin
            - SI
              - Vérifier : Porte d'entrée (Entrée) est “off”
              - ALORS
                - Verrouiller Porte d'entrée (Entrée)
              - SINON
                - Lancer le script : Power Notification - Porte d'entrée ouverte lors du coucher
        - Éteindre les lumières dans Chambre
        - Pause Enceintes (Chambre)
        - SI
          - Vérifier : Fenêtre (Chambre) est “off”
          - ALORS
            - Fermer Rideau (Chambre)
